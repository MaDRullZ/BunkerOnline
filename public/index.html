<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Bunker Online</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js" crossorigin="anonymous"></script>
</head>
<body>
  <div class="container" id="menuScreen">
    <h1>Bunker Online</h1>
    <button id="createRoomBtn">Создать комнату</button>
    <div>
      <input type="text" id="roomInput" placeholder="Введите код комнаты">
      <button id="joinRoomBtn">Присоединиться</button>
    </div>
    <div id="status"></div>
  </div>

  <div class="container" id="gameScreen" style="display:none;">
    <h2>Игра началась!</h2>
    <div id="gameStatus"></div>
  </div>

  <script>
    const socket = io();

    const menuScreen = document.getElementById("menuScreen");
    const gameScreen = document.getElementById("gameScreen");
    const statusDiv = document.getElementById("status");
    const gameStatus = document.getElementById("gameStatus");

    document.getElementById("createRoomBtn").addEventListener("click", () => {
      socket.emit("createRoom", (roomCode) => {
        statusDiv.innerHTML = `Комната создана! Код: <b>${roomCode}</b>`;
        // Переходим в игровой экран
        menuScreen.style.display = "none";
        gameScreen.style.display = "block";
        gameStatus.innerHTML = `Вы создали комнату: <b>${roomCode}</b>`;
      });
    });

    document.getElementById("joinRoomBtn").addEventListener("click", () => {
      const roomCode = document.getElementById("roomInput").value.toUpperCase();
      socket.emit("joinRoom", roomCode, (success) => {
        if(success) {
          statusDiv.innerHTML = `Вы присоединились к комнате <b>${roomCode}</b>`;
          menuScreen.style.display = "none";
          gameScreen.style.display = "block";
          gameStatus.innerHTML = `Вы присоединились к комнате: <b>${roomCode}</b>`;
        } else {
          statusDiv.innerHTML = `<span style="color:red">Комната не найдена!</span>`;
        }
      });
    });
  </script>
</body>
</html>
